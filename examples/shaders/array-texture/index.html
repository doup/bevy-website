<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Array Texture" property=og:title><meta content=website property=og:type><meta content=https://bevyengine.org//examples/shaders/array-texture/ property=og:url><meta content=https://bevyengine.org/assets/bevy_logo_fill.png property=og:image><meta content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" property=og:description><link rel="shortcut icon" href=/assets/favicon.png type=image/png><noscript><style>.js-only{display:none}</style></noscript><link href=/site.css rel=stylesheet><link href=/atom.xml rel=alternate type=application/atom+xml><title>Array Texture</title><script src=/search.mjs type=module></script><body><div class=layout><input class=hidden id=mobile-menu-state type=checkbox><header class="layout__header header print:hidden" data-mobile-menu-state-container><div class=header__content><label class=main-menu-backdrop for=mobile-menu-state></label><label class="header__hamburger button-square button-square--header" for=mobile-menu-state><img alt="Three horizontal lines stacked on top of eachother" height=16 src=/assets/icon-hamburger.svg width=20></label><div class=header__left-block><a class=header__logo href=/> <picture class=logo><img alt="Bevy logo" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class=header__message>Examples (WebGL2)</div></div><nav class="header__menu main-menu" data-page-menu-switch-state-container role=navigation><div class=main-menu__header><a class=main-menu__logo href=/> <picture class=logo><img alt="Bevy Engine" class=logo height=130 src=/assets/bevy_logo_dark.svg width=520></picture> </a><div class="button-square button-square--header js-only" data-search-open><i class="icon icon--search" alt=Search></i></div><label class="button-square button-square--header" for=mobile-menu-state><img alt="A saltire or x-cross" height=16 src=/assets/icon-times.svg width=16></label></div><div class=main-menu__content><div class=main-menu__page-menu></div><ul class=main-menu__menu><li class="main-menu__entry main-menu__entry--getting-started"><a class=main-menu__link href=/learn/quick-start/getting-started/> <span>Getting Started</span> </a><li class=main-menu__entry><a class=main-menu__link href=/learn/> <span>Learn</span> </a><li class=main-menu__entry><a class=main-menu__link href=/news/> <span>News</span> </a><li class=main-menu__entry><a class=main-menu__link href=/community/> <span>Community</span> </a><li class=main-menu__entry><a class=main-menu__link href=/foundation/> <span>Foundation</span> </a><li class=main-menu__entry><a class=main-menu__link href=/assets/> <span>Assets</span> </a><li class=main-menu__entry><a class="main-menu__link main-menu__link--active" href=/examples/> <span>Examples</span> </a></ul></div></nav><div class=header__cta-container><div class="header__cta header__cta--search button-square button-square--header js-only" data-search-open><i class="icon icon--search" alt=Search></i></div><a class="header__cta button button--pink" href=/donate>Donate <img alt="heart icon" class=button__icon height=512 src=/assets/heart.svg width=512> </a><a class="header__cta header__cta--github" href=https://github.com/bevyengine/bevy> <img alt="GitHub repo" height=96 src=/assets/github-mark-white.svg width=98> </a></div></div></header><main class=layout__content data-pagefind-body data-pagefind-filter=category:Examples><div class=container><div class=example><div class=example__header><h2 class=example__title>Shaders / Array Texture</h2><a class=example__back href=/examples><i class="icon icon--chevron-left"></i> Back to examples</a><a class=example__github href=https://github.com/bevyengine/bevy/blob/latest/examples/shader/array_texture.rs> <i class="icon icon--github"></i> View in GitHub </a></div><div class="example__canvas bevy-instance"><div class=bevy-instance__progress-status data-progress-status><div class=bevy-instance__progress-file data-progress-file></div><div class=bevy-instance__progress-track><div class=bevy-instance__progress-bar data-progress-bar></div></div></div><canvas class=bevy-instance__canvas height=720 id=bevy width=1280></canvas><aside class="example__callout media-content callout callout--plain callout--info" data-pagefind-ignore>This example is running in WebGL2 and should work in most browsers. You can check the WebGPU example <a href=/examples-webgpu/shaders/array-texture/>here</a>.</aside></div><div class="example__code-tabs tabs"><input checked class=tabs__radio id=tab0 name=tabs tabindex=1 type=radio><label class=tabs__label for=tab0>array_texture.rs</label><div class=tabs__panel tabindex=1><div class="example__code media-content" data-pagefind-weight=0.25><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">//!</span> This example illustrates how to create a texture for use with a `texture_2d_array&LTf32>` shader
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">//!</span> uniform variable.
</span></span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">prelude<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-keyword z-operator z-arithmetic z-rust">*</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">reflect<span class="z-punctuation z-accessor z-rust">::</span></span>TypePath<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">render<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">render_resource<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>AsBindGroup<span class="z-punctuation z-separator z-rust">,</span> ShaderRef</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> This example uses a shader source file from the assets subdirectory
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">SHADER_ASSET_PATH</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-type z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>shaders/array_texture.wgsl<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            DefaultPlugins<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">MaterialPlugin<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ArrayTextureMaterial<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Startup<span class="z-punctuation z-separator z-rust">,</span> setup</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Update<span class="z-punctuation z-separator z-rust">,</span> create_array_texture</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Resource</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">LoadingTexture</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">is_loaded</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">bool</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">handle</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Image<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">setup</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands, <span class="z-variable z-parameter z-rust">asset_server</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AssetServer<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Start loading the texture.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>LoadingTexture <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        is_loaded<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-language z-rust">false</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        handle<span class="z-punctuation z-separator z-rust">:</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>textures/array_texture.png<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> light
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">DirectionalLight<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_xyz<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">looking_at</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">ZERO</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> camera
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Camera3d<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_xyz<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">looking_at</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">Vec3<span class="z-punctuation z-accessor z-rust">::</span></span>Y</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">create_array_texture</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">asset_server</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>AssetServer<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">loading_texture</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>LoadingTexture<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">images</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Image<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">meshes</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Mesh<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">materials</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">ResMut<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-meta z-generic z-rust">Assets<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>ArrayTextureMaterial<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> loading_texture<span class="z-punctuation z-accessor z-dot z-rust">.</span>is_loaded
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-logical z-rust">||</span> <span class="z-keyword z-operator z-logical z-rust">!</span>asset_server
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>loading_texture<span class="z-punctuation z-accessor z-dot z-rust">.</span>handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_loaded</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">return</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    loading_texture<span class="z-punctuation z-accessor z-dot z-rust">.</span>is_loaded <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-language z-rust">true</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> image <span class="z-keyword z-operator z-assignment z-rust">=</span> images<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">get_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>loading_texture<span class="z-punctuation z-accessor z-dot z-rust">.</span>handle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Create a new array texture asset from the loaded texture.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> array_layers <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">4</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    image<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">reinterpret_stacked_2d_as_array</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>array_layers</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Spawn some cubes using the array texture
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> mesh_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> meshes<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Cuboid<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> material_handle <span class="z-keyword z-operator z-assignment z-rust">=</span> materials<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>ArrayTextureMaterial <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        array_texture<span class="z-punctuation z-separator z-rust">:</span> loading_texture<span class="z-punctuation z-accessor z-dot z-rust">.</span>handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> x <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span><span class="z-keyword z-operator z-range z-rust">..</span><span class="z-keyword z-operator z-assignment z-rust">=</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            Mesh3d<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>mesh_handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            MeshMaterial3d<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>material_handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-meta z-path z-rust">Transform<span class="z-punctuation z-accessor z-rust">::</span></span>from_xyz<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>x <span class="z-keyword z-operator z-rust">as</span> <span class="z-storage z-type z-rust">f32</span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Asset<span class="z-punctuation z-separator z-rust">,</span> TypePath<span class="z-punctuation z-separator z-rust">,</span> AsBindGroup<span class="z-punctuation z-separator z-rust">,</span> Debug<span class="z-punctuation z-separator z-rust">,</span> Clone</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">ArrayTextureMaterial</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">texture</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">0<span class="z-punctuation z-separator z-rust">,</span> dimension <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>2d_array<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">sampler</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">1</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">array_texture</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">Handle<span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>Image<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Material <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">ArrayTextureMaterial</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">fragment_shader</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> ShaderRef</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-constant z-other z-rust">SHADER_ASSET_PATH</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre></div></div><input class=tabs__radio id=tab1 name=tabs tabindex=1 type=radio><label class=tabs__label for=tab1>shaders/array_texture.wgsl</label><div class=tabs__panel tabindex=1><div class="example__code media-content" data-pagefind-weight=0.25><pre class="language-wgsl z-code" data-lang=wgsl><code class=language-wgsl data-lang=wgsl><span class="z-source z-wgsl">#<span class="z-variable z-other z-wgsl">import</span> <span class="z-variable z-other z-wgsl">bevy_pbr</span>::<span class="z-punctuation z-brackets z-curly z-wgsl">{</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">forward_io</span>::<span class="z-entity z-name z-type z-wgsl">VertexOutput</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">mesh_view_bindings</span>::<span class="z-variable z-other z-wgsl">view</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_types</span>::<span class="z-punctuation z-brackets z-curly z-wgsl">{</span>STANDARD_MATERIAL_FLAGS_DOUBLE_SIDED_BIT<span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-entity z-name z-type z-wgsl">PbrInput</span><span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">pbr_input_new</span><span class="z-punctuation z-brackets z-curly z-wgsl">}</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_functions</span> <span class="z-variable z-other z-wgsl">as</span> <span class="z-variable z-other z-wgsl">fns</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_bindings</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span><span class="z-source z-wgsl"><span class="z-punctuation z-brackets z-curly z-wgsl">}</span>
</span><span class="z-source z-wgsl">#<span class="z-variable z-other z-wgsl">import</span> <span class="z-variable z-other z-wgsl">bevy_core_pipeline</span>::<span class="z-variable z-other z-wgsl">tonemapping</span>::<span class="z-variable z-other z-wgsl">tone_mapping</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl"><span class="z-meta z-attribute z-wgsl"><span class="z-keyword z-operator z-attribute z-at">@</span><span class="z-entity z-name z-attribute z-wgsl">group</span></span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-constant z-numeric z-decimal z-wgsl">2</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span> <span class="z-meta z-attribute z-wgsl"><span class="z-keyword z-operator z-attribute z-at">@</span><span class="z-entity z-name z-attribute z-wgsl">binding</span></span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-constant z-numeric z-decimal z-wgsl">0</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span> <span class="z-keyword z-other z-wgsl"><span class="z-storage z-type z-wgsl">var</span></span> <span class="z-variable z-other z-wgsl">my_array_texture</span>: <span class="z-storage z-type z-wgsl">texture_2d_array</span><span class="z-punctuation z-brackets z-angle z-wgsl"><</span><span class="z-storage z-type z-wgsl">f32</span><span class="z-punctuation z-brackets z-angle z-wgsl">></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl"><span class="z-meta z-attribute z-wgsl"><span class="z-keyword z-operator z-attribute z-at">@</span><span class="z-entity z-name z-attribute z-wgsl">group</span></span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-constant z-numeric z-decimal z-wgsl">2</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span> <span class="z-meta z-attribute z-wgsl"><span class="z-keyword z-operator z-attribute z-at">@</span><span class="z-entity z-name z-attribute z-wgsl">binding</span></span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-constant z-numeric z-decimal z-wgsl">1</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span> <span class="z-keyword z-other z-wgsl"><span class="z-storage z-type z-wgsl">var</span></span> <span class="z-variable z-other z-wgsl">my_array_texture_sampler</span>: <span class="z-storage z-type z-wgsl">sampler</span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl"><span class="z-meta z-attribute z-wgsl"><span class="z-keyword z-operator z-attribute z-at">@</span><span class="z-entity z-name z-attribute z-wgsl">fragment</span></span>
</span><span class="z-source z-wgsl"><span class="z-keyword z-other z-fn z-wgsl">fn</span> <span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">fragment</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">    <span class="z-meta z-attribute z-wgsl"><span class="z-keyword z-operator z-attribute z-at">@</span><span class="z-entity z-name z-attribute z-wgsl">builtin</span></span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">front_facing</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span></span> <span class="z-variable z-other z-wgsl">is_front</span>: <span class="z-storage z-type z-wgsl">bool</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">mesh</span>: <span class="z-entity z-name z-type z-wgsl">VertexOutput</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span><span class="z-source z-wgsl"><span class="z-punctuation z-brackets z-round z-wgsl">)</span> <span class="z-keyword z-operator z-arrow z-skinny z-wgsl">-></span> <span class="z-meta z-attribute z-wgsl"><span class="z-keyword z-operator z-attribute z-at">@</span><span class="z-entity z-name z-attribute z-wgsl">location</span></span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-constant z-numeric z-decimal z-wgsl">0</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span> <span class="z-storage z-type z-wgsl">vec4</span><span class="z-punctuation z-brackets z-angle z-wgsl"><</span><span class="z-storage z-type z-wgsl">f32</span><span class="z-punctuation z-brackets z-angle z-wgsl">></span> <span class="z-punctuation z-brackets z-curly z-wgsl">{</span>
</span><span class="z-source z-wgsl">    <span class="z-keyword z-other z-wgsl"><span class="z-storage z-type z-wgsl">let</span></span> <span class="z-variable z-other z-wgsl">layer</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">i32</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_position<span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>x<span class="z-punctuation z-brackets z-round z-wgsl">)</span></span> <span class="z-keyword z-operator z-borrow z-and z-wgsl">&</span> <span class="z-constant z-numeric z-decimal z-wgsl">0x3</span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl"><span class="z-comment z-line z-double-slash z-wgsl">    // Prepare a 'processed' StandardMaterial by sampling all textures to resolve</span>
</span><span class="z-source z-wgsl"><span class="z-comment z-line z-double-slash z-wgsl">    // the material members</span>
</span><span class="z-source z-wgsl">    <span class="z-keyword z-other z-wgsl"><span class="z-storage z-type z-wgsl">var</span></span> <span class="z-variable z-other z-wgsl">pbr_input</span>: <span class="z-entity z-name z-type z-wgsl">PbrInput</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">pbr_input_new</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>material<span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>base_color <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">textureSample</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">my_array_texture</span><span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">my_array_texture_sampler</span><span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>uv<span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">layer</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">#<span class="z-variable z-other z-wgsl">ifdef</span> VERTEX_COLORS
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>material<span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>base_color <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>material<span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>base_color <span class="z-keyword z-operator z-math z-wgsl">*</span> <span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>color<span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">#<span class="z-variable z-other z-wgsl">endif</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">    <span class="z-keyword z-other z-wgsl"><span class="z-storage z-type z-wgsl">let</span></span> <span class="z-variable z-other z-wgsl">double_sided</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>material<span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>flags <span class="z-keyword z-operator z-borrow z-and z-wgsl">&</span> STANDARD_MATERIAL_FLAGS_DOUBLE_SIDED_BIT<span class="z-punctuation z-brackets z-round z-wgsl">)</span> <span class="z-keyword z-operator z-comparison z-wgsl">!=</span> <span class="z-constant z-numeric z-decimal z-wgsl">0u</span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>frag_coord <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>position<span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_position <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_position<span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_normal <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">fns</span>::<span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">prepare_world_normal</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_normal<span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-variable z-other z-wgsl">double_sided</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-variable z-other z-wgsl">is_front</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">    <span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>is_orthographic <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">view</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>clip_from_view<span class="z-punctuation z-brackets z-square z-wgsl">[</span><span class="z-constant z-numeric z-decimal z-wgsl">3</span><span class="z-punctuation z-brackets z-square z-wgsl">]</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>w <span class="z-keyword z-operator z-comparison z-wgsl">==</span> <span class="z-constant z-numeric z-float z-wgsl">1.0</span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span><span class="z-entity z-name z-type z-wgsl">N</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">normalize</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_normal<span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">#<span class="z-variable z-other z-wgsl">ifdef</span> VERTEX_TANGENTS
</span><span class="z-source z-wgsl">    <span class="z-keyword z-other z-wgsl"><span class="z-storage z-type z-wgsl">let</span></span> <span class="z-entity z-name z-type z-wgsl">Nt</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">textureSampleBias</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">pbr_bindings</span>::<span class="z-variable z-other z-wgsl">normal_map_texture</span><span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">pbr_bindings</span>::<span class="z-variable z-other z-wgsl">normal_map_sampler</span><span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>uv<span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">view</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>mip_bias<span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>rgb<span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">    <span class="z-keyword z-other z-wgsl"><span class="z-storage z-type z-wgsl">let</span></span> <span class="z-entity z-name z-type z-wgsl">TBN</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">fns</span>::<span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">calculate_tbn_mikktspace</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_normal<span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_tangent<span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span><span class="z-entity z-name z-type z-wgsl">N</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">fns</span>::<span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">apply_normal_mapping</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>material<span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>flags<span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-entity z-name z-type z-wgsl">TBN</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-variable z-other z-wgsl">double_sided</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-variable z-other z-wgsl">is_front</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">        <span class="z-entity z-name z-type z-wgsl">Nt</span><span class="z-punctuation z-comma z-wgsl">,</span>
</span></span><span class="z-source z-wgsl"><span class="z-meta z-function z-call z-wgsl">    <span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">#<span class="z-variable z-other z-wgsl">endif</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">    <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span><span class="z-entity z-name z-type z-wgsl">V</span> <span class="z-keyword z-operator z-assignment z-equal z-wgsl">=</span> <span class="z-variable z-other z-wgsl">fns</span>::<span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">calculate_view</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">mesh</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>world_position<span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>is_orthographic<span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl">
</span><span class="z-source z-wgsl">    <span class="z-keyword z-control z-wgsl">return</span> <span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">tone_mapping</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">fns</span>::<span class="z-meta z-function z-call z-wgsl"><span class="z-entity z-name z-function z-wgsl">apply_pbr_lighting</span><span class="z-punctuation z-brackets z-round z-wgsl">(</span><span class="z-variable z-other z-wgsl">pbr_input</span><span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-comma z-wgsl">,</span> <span class="z-variable z-other z-wgsl">view</span><span class="z-keyword z-operator z-access z-dot z-wgsl">.</span>color_grading<span class="z-punctuation z-brackets z-round z-wgsl">)</span></span><span class="z-punctuation z-semi z-wgsl">;</span>
</span><span class="z-source z-wgsl"><span class="z-punctuation z-brackets z-curly z-wgsl">}</span>
</span></code></pre></div></div></div></div><script type=module>import { progressiveFetch } from '/tools.js';
    import '/restart-audio-context.js'
    import init from 'https://bevy-webgl2-examples.pages.dev/Shaders/array-texture/wasm_example.js'

    const canvasEl = document.getElementById('bevy');

    let once = false;
    const observer_callback = (_mutations, _observer) => {
      if (!once) {
        // Lock the canvas aspect ratio to prevent the fit_canvas_to_parent setting from creating a feedback loop causing the canvas to grow on resize
        canvasEl.style.aspectRatio = canvasEl.attributes.width.value / canvasEl.attributes.height.value;
        once = true;
      }
    };

    const observer = new MutationObserver(observer_callback);

    const config = { attributeFilter: ['width', 'height'] };

    observer.observe(canvasEl, config);

    const progressStatusEl = document.querySelector('[data-progress-status]');
    const progressFileEl = document.querySelector('[data-progress-file]');
    const progressBarEl = document.querySelector('[data-progress-bar]');
    let hideProgressTimeoutId;

    async function loadingBarFetch(resource) {
      return progressiveFetch(resource, {
        start: ({ filename }) => {
          progressStatusEl.style.display = 'block';
          progressFileEl.textContent = filename;

          if (hideProgressTimeoutId) {
            clearTimeout(hideProgressTimeoutId);
          }
        },
        update: ({ isIndeterminate, loadedPercent }) => {
          progressBarEl.classList.toggle('bevy-instance__progress-bar--indeterminate', isIndeterminate);
          progressBarEl.style.width = loadedPercent + '%';
        },
        finish: () => {
          
          hideProgressTimeoutId = setTimeout(() => {
            progressStatusEl.style.display = 'none';
          }, 50);
        }
      })
    }
    window.bevyLoadingBarFetch = loadingBarFetch;

    
    init().catch((error) => {
      if (!error.message.startsWith("Using exceptions for control flow, don't mind me. This isn't actually an error!")) {
        throw error;
      }
    });</script></div></main><footer class=print:hidden><div class=footer__social-container><a class=footer__social href=https://github.com/bevyengine/bevy title=GitHub> <img alt="GitHub logo" height=24 src=/assets/github-mark-white.svg width=24> </a><a class=footer__social href=https://discord.gg/bevy title=Discord> <img alt="Discord logo" height=24 src=/assets/discord.svg width=24> </a><a class=footer__social href=https://bsky.app/profile/bevyengine.org title=Bluesky> <img alt="Bluesky logo" height=24 src=/assets/bluesky.svg width=24> </a><a class=footer__social href=https://mastodon.social/@bevy title=Mastodon> <img alt="Mastodon logo" height=24 src=/assets/mastodon-logo-purple.svg width=24> </a><a class=footer__social href=https://www.reddit.com/r/bevy/ title=Reddit> <img alt="Reddit logo" height=24 src=/assets/reddit.svg width=24> </a><a class=footer__social href=https://itch.io/games/tag-bevy title=itch.io> <img alt="itch.io logo" height=24 src=/assets/itchio-textless.svg width=24> </a><a title="Bevy news feed" class=footer__social href=/atom.xml> <img alt="Bevy news feed" height=24 src=/assets/feed.svg width=24> </a></div></footer></div><div class=search data-search><div class=search__backdrop data-search-backdrop></div><div class=search__dialog data-search-dialog><div class=search__header><div class=search__header-top><div class=search__input-wrapper><input class=search__input data-search-input placeholder=Search><button class="search__clear-filter hidden" data-search-clear-filter><i class="icon icon--times"></i></button></div><button class="search__close button" data-search-close>Close</button></div><div class=search__categories data-search-categories></div></div><div class="search__content hidden" data-search-content tabindex=-1><div class="search__no-results hidden" data-search-no-results><div>No results found for "<span data-search-term></span>".<br> :-(</div></div><div class="search__results hidden" data-search-results></div></div><div class=search__tip><strong>Tip</strong>: Press <kbd>S</kbd> to open the search dialog, and <kbd>Esc</kbd> to close it. Use <kbd>/</kbd> to select a result, and <kbd>Enter</kbd> to navigate.</div><template data-search-category-tpl><button class=search-category data-category></button></template><template data-search-result-compact-tpl><a class="search-result search-result--compact" data-search-result data-wrapper> <div class=search-result__header><h3 class=search-result__title data-title></h3><div class="search-result__category search-category search-category--active search-category--compact" data-category></div></div> <p class=search-result__excerpt data-excerpt></p> </a></template><template data-search-result-tpl><div class=search-result><div class=search-result__header><a class=search-result__title data-title></a><div class="search-result__category search-category search-category--active search-category--compact" data-category></div></div><div class=search-result__sub-results data-sub-results></div><div class="search-result__more hidden" data-more></div></div></template><template data-search-sub-result-tpl><a class=search-result__sub-item data-link data-search-result> <h4 class=search-result__sub-title data-title></h4> <span class=search-result__excerpt data-excerpt></span> </a></template></div></div><script>const search_params=new URLSearchParams(window.location.search);if(search_params.has(`show_drafts`)||document.cookie.indexOf(`show_drafts`)>=0){let a=`show_drafts`;if(search_params.get(a)===`0`){document.cookie=`show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC`}else{document.cookie=`show_drafts=1;path=/`;document.body.classList.add(a)}}</script>